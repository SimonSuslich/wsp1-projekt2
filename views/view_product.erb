<section class="view-product">



    <div class="product-gallery">
        <div class="main-image">
            <button class="nav-button prev" onclick="prevImage()">&#10094;</button>
            <div class="image-container">
                <img id="currentImage" src="<%= @product_images.first %>" alt="Main product image">
            </div>
            <button class="nav-button next" onclick="nextImage()">&#10095;</button>
        </div>
        <div class="thumbnail-container-wrapper">
            <button class="thumbnail-nav prev" onclick="scrollThumbnails(-1)">&#10094;</button>
            <div class="thumbnail-container">

                <% @product_images.each_with_index do |image, i| %>
                    <img class="thumbnail" src="<%= image %>"
                        onclick="changeImage('<%= image %>', <%= i %>)" alt="Thumbnail 1">
                    <!-- Add more thumbnails as needed -->
                <% end %>

            </div>
            <button class="thumbnail-nav next" onclick="scrollThumbnails(1)">&#10095;</button>
        </div>
    </div>


    <div class="product-info-container">

        <div class="quick-info-container">
            <p class="title"><%= @product["title"]%></p>
            <p class="price"><%= @product[:formated_price]%> SEK</p>
        </div>

        <div class="overview-container">
            <p class="overview">Overview</p>
            <ul class="info-container">
                <li>
                    <p class="label">Model year</p>
                    <p class="info">2024</p>
                </li>
                <li>
                    <p class="label">Model year</p>
                    <p class="info">2024</p>
                </li>
                <li>
                    <p class="label">Model year</p>
                    <p class="info">2024</p>
                </li>
                <li>
                    <p class="label">Model year</p>
                    <p class="info">2024</p>
                </li>
            </ul>
        </div>

        <div class="purchase-controlls">
            <button class="btn-2">
                Put into cart
                <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'
                    class="icon-white">
                    <path
                        d="M21 4H2v2h2.3l3.28 9a3 3 0 0 0 2.82 2H19v-2h-8.6a1 1 0 0 1-.94-.66L9 13h9.28a2 2 0 0 0 1.92-1.45L22 5.27A1 1 0 0 0 21.27 4 .84.84 0 0 0 21 4zm-2.75 7h-10L6.43 6h13.24z">
                    </path>
                    <circle cx="10.5" cy="19.5" r="1.5"></circle>
                    <circle cx="16.5" cy="19.5" r="1.5"></circle>
                </svg>
            </button>
            <button class="btn-2">
                Contact dealer
                <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='#000000' width='24'
                    height='24'>
                    <path
                        d="M12 2a5 5 0 1 0 5 5 5 5 0 0 0-5-5zm0 8a3 3 0 1 1 3-3 3 3 0 0 1-3 3zm9 11v-1a7 7 0 0 0-7-7h-4a7 7 0 0 0-7 7v1h2v-1a5 5 0 0 1 5-5h4a5 5 0 0 1 5 5v1z">
                    </path>
                </svg>
            </button>
        </div>
    </div>

    <div class="product-description-container">
        <p class="description-short description-paragraph"></p>
        <p class="description description-paragraph">Lorem ipsum dolor sit amet, consectetur adipisicing elit.
            Magnam ea dignissimos
            unde consequatur neque provident. Aliquid voluptatem esse tempora cumque, illum eveniet praesentium
            nisi blanditiis? Hic quae, eligendi ipsum non numquam illum adipisci, error alias ut reiciendis
            fugiat quisquam est quaerat! In voluptates porro, velit laudantium laboriosam veniam eos? Temporibus
            voluptates ad aliquid, cupiditate nesciunt itaque. Optio provident eligendi autem voluptates quasi
            incidunt nesciunt suscipit? Tempore, totam? Nulla voluptate perspiciatis, fugiat eligendi voluptatum
            accusantium natus amet optio hic autem, magni aut quas est magnam rerum nam inventore velit, id ex
            quae. Cumque ducimus odit quos nam nihil recusandae esse quidem maxime optio praesentium,
            exercitationem corrupti tenetur excepturi vero impedit ea necessitatibus eligendi culpa id qui
            nesciunt. Explicabo nulla in sequi tempora officia libero perferendis porro ea iusto rerum eius
            doloribus, amet quae repellendus reiciendis ipsam earum nobis assumenda molestiae a impedit quasi
            odio! Ut illum quos mollitia consectetur illo, ex odit consequuntur itaque quas obcaecati! Iusto
            iste adipisci harum dicta assumenda repudiandae magni velit ipsam obcaecati libero alias ipsum saepe
            asperiores maiores veritatis non magnam, tenetur quo illo doloribus? Alias aperiam rem eveniet,
            aliquam et tenetur porro deserunt rerum error exercitationem. Blanditiis exercitationem veritatis
            obcaecati ratione atque ipsum quam ipsam eligendi velit ex, distinctio nam placeat deserunt, natus
            doloribus veniam aliquam minima, recusandae consequuntur asperiores! Veritatis, eos doloremque. Eius
            modi animi repellat fugiat, recusandae at quam fugit nam cupiditate quasi voluptates laboriosam
            incidunt quas illum labore explicabo, impedit maiores? Maxime unde doloremque numquam incidunt
            possimus veniam tempore omnis rem, magnam totam esse alias tempora quas temporibus sit id saepe eos?
            Consequatur, non? Perspiciatis suscipit doloribus velit quia tempora nihil nam ratione a aspernatur
            expedita! Obcaecati nemo a necessitatibus saepe ducimus! Voluptates nam adipisci esse perspiciatis
            animi ea debitis porro culpa inventore et! Voluptatem sunt dolorum numquam esse voluptates! Dolor
            corporis error cumque. Quo odio id dolorem illum quaerat ipsum odit distinctio facere quisquam natus
            laborum incidunt debitis quia ad praesentium accusamus cum ullam, temporibus et. Corrupti quo eum
            dignissimos earum! Ducimus modi ipsum tempora nobis odio. Eum saepe magni corrupti et atque ea quos
            dolor repellat excepturi, repudiandae corporis, rerum debitis deserunt? Natus odio numquam eum
            voluptatum veniam, molestiae id ducimus explicabo harum at, nemo deleniti soluta ipsa ex ipsum dicta
            cumque facere sint earum ipsam! Nisi distinctio accusantium dolor numquam architecto iusto.
            Obcaecati quidem incidunt iusto id. Sed quas inventore aliquid sunt tempora nemo vero tenetur. Odio
            consequuntur tempore corrupti minima porro similique ipsam soluta excepturi impedit illum cum atque
            laborum, eligendi ab blanditiis laudantium expedita inventore ea error cumque perspiciatis enim
            adipisci eos. Quidem alias cum, porro odit illo beatae distinctio? Optio vitae beatae similique
            sequi quos obcaecati voluptas blanditiis temporibus non in quibusdam omnis consequatur veritatis
            sit, asperiores dolorem, cupiditate, error ea ipsa labore! Architecto, omnis non! Autem natus
            cupiditate omnis modi odio labore tempora soluta, explicabo obcaecati quam sed commodi pariatur
            voluptas unde eos placeat magnam. Dolore saepe sapiente corporis quibusdam, dolorum ratione libero
            rerum atque ullam repellendus tempora eos, earum quis reiciendis iusto porro deserunt!
        </p>

        <div class="description-buttons-container">
            <button class="description-button show-less" onclick="descriptionToggle()">
                Show less
            </button>

            <button class="description-button show-more" onclick="descriptionToggle()">
                Show more
            </button>
        </div>


    </div>


</section>
<script>
    // Array of image URLs
    const images = <%= @product_images%>;
    let currentIndex = 0;

    // Function to change the main image
    function changeImage(imageUrl, index) {
        const currentImage = document.getElementById("currentImage");
        currentImage.classList.add("fade-out"); // Add fade-out effect

        console.log(imageUrl)

        setTimeout(() => {
            currentImage.src = imageUrl;
            currentImage.classList.remove("fade-out");
        }, 150); // Match the transition duration in CSS

        currentIndex = index;
    }

    // Function to show the next image
    function nextImage() {
        currentIndex = (currentIndex + 1) % images.length; // Loop to the start
        changeImage(images[currentIndex], currentIndex);
    }

    // Function to show the previous image
    function prevImage() {
        currentIndex = (currentIndex - 1 + images.length) % images.length; // Loop to the end
        changeImage(images[currentIndex], currentIndex);
    }

    // Function to scroll the thumbnail container
    function scrollThumbnails(direction) {
        const container = document.querySelector(".thumbnail-container");
        const scrollAmount = 500; // Adjust scrolling amount as needed
        container.scrollLeft += direction * scrollAmount; // Scroll left or right
    }




    const descriptionLength = document.querySelector(".description").textContent.length;
    const descriptionElement = document.querySelector(".description");
    const descriptionShortElement = document.querySelector(".description-short");
    descriptionShortElement.classList.add("content-hidden");
    descriptionShortElement.textContent = descriptionElement.textContent.slice(0, 500);
    descriptionShortElement.textContent += "...";
    const descriptionControlls = document.querySelector(".description-buttons-container")
    let descriptionRevealed = false;
    const showMoreDescription = document.querySelector(".show-more");
    const showLessDescription = document.querySelector(".show-less");
    showLessDescription.classList.add("content-hidden")

    if (descriptionLength < 500) {
        descriptionControlls.classList.add("content-hidden");
    } else {
        descriptionToggle();
    }



    function descriptionToggle() {
        if (descriptionRevealed) {
            showLessDescription.classList.remove("content-hidden");
            showMoreDescription.classList.add("content-hidden");
            descriptionElement.classList.remove("content-hidden");
            descriptionShortElement.classList.add("content-hidden");
        } else {
            showMoreDescription.classList.remove("content-hidden");
            showLessDescription.classList.add("content-hidden");
            descriptionElement.classList.add("content-hidden");
            descriptionShortElement.classList.remove("content-hidden");
        }
        descriptionRevealed = !descriptionRevealed

    }

</script>